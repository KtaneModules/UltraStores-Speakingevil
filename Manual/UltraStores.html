<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>UltraStores — Keep Talking and Nobody Explodes Module</title>
    <meta name="viewport" content="initial-scale=1">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        .clarification {
            font-weight: bold;
        }

            .clarification p {
                margin-bottom: 0;
            }

            .clarification ul {
                margin-top: 0;
            }
        }
    </style>
</head>
<body>
    <div id="ManualContent">
        <div class="section">
            <div class="page page-bg-01">
                <div class="page-header">
                    <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                    <span class="page-header-section-title">UltraStores</span>
                </div>
                <div class="page-content">
                    <img src="img/Component/UltraStores.svg" class="diagram">
                    <h2>On the Subject of UltraStores</h2>
                    <p class="flavour-text">Do you think God stays in heaven because he, too, lives in fear of what he's created?</p>

                    <p>This module consists of eight black buttons, a large central button, and thirty-two floating discs.</p>
                    <p>These discs travel in straight lines, remsembling rotations of a penteract (5D cube).<br>
					   These rotations correspond to functions in the tables below.</p>
					<p>There are three stages, each with one more rotation than the previous.</p>
					<p>There will be a long pause between rotations, indicating where the sequence restarts.</p>
                    <p>Apply each operation successively until the end of the sequence and use the result to determine the sequence of coloured buttons to press for each stage.</p>
                    <div class='clarification'>
                        <p>If at any point an operator yields-</p>
                        <ul>
                            <li>a value greater than 364, then subtract 365 from the value until it is less than 365.</li>
                            <li>a value less than -364, then add 365 to the value until it is greater than -365.</li>
                        </ul>
                    </div>

                    <h3>Section 1: Determining Initial Values</h3>
                    <p>To determine the number to be entered into the sequence of operators, interpret the following pairs of digits in the serial number as <em>two-digit base-36 numbers</em> and take them modulo 365:</p>
                    <ul>
                        <li>For stage 1, a<sub>0</sub> is obtained by using the 3rd and 4th digits.</li>
                        <li>For stage 2, b<sub>0</sub> is obtained by using the 5th and 6th digits.</li>
                        <li>For stage 3, c<sub>0</sub> is obtained by using the 1st and 2nd digits.</li>
                    </ul>                
                </div>
                <div class="page-footer relative-footer">Page 1 of 5</div>
            </div>
            <div class="page page-bg-02">
                <div class="page-header">
                    <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                    <span class="page-header-section-title">UltraStores</span>
                </div>
                <div class="page-content">
                   
                <h3>Section 2: Operation Tables</h3>                 
                    <p>In each stage, each rotation is associated with an operation, expressed here as a function:</p>
                    <ul>
                        <li><small>n is the current step of the sequence.</small></li>
                        <li><small>D is the sum of the individual base-36 digits of the serial number.</small></li>
					<font size = "2">
                    <table>

                        <tr>
                            <th></th>
                            <th>Stage 1</th>
                            <th>Stage 2</th>
                            <th>Stage 3</th>
                        </tr>
                       
                        <tr>
                           <th>XY</th>
							<td><small>XY(x) = x + D</small></td>
							<td><small>XY(x) = x + a<sub>n-1</sub></small></td>
							<td><small>XY(x) = x + b<sub>n-1</sub> - a<sub>n-1</sub></small></td>
                        </tr>
                           
                        <tr>
                           <th>XZ</th>
							<td><small>XZ(x) = 2x - D</small></td>
							<td><small>XZ(x) = 2x - a<sub>n-1</sub></small></td>
							<td><small>XZ(x) = 2x - b<sub>n-1</sub> - a<sub>n-1</sub></small></td>
                        </tr>
							
                        <tr>
                           <th>YZ</th>
							<td><small>XW(x) = x + 2D</small></td>
							<td><small>XW(x) = x + 2a<sub>n-1</sub></small></td>
							<td><small>XW(x) = x + 2b<sub>n-1</sub> - a<sub>n-1</sub></small></td>
                        </tr>
							
                        <tr>
						   <th>XW</th>
						   <td><small>XV(x) = 2D - x</small></td>
						   <td><small>XV(x) = 3D - x - a<sub>n-1</sub></small></td>
						   <td><small>XV(x) = 4D - x - b<sub>n-1</sub> - a<sub>n-1</sub></small></td>
                        </tr>
							
                        <tr>
                           <th>YW</th>
						   <td><small>YZ(x) = 2x + D - 35n</small></td>
						   <td><small>YZ(x) = 2x + abs(a<sub>n-1</sub>) - 12n<sup>2</sup></small></td>
						   <td><small>YZ(x) = <br>2x + abs(b<sub>n-1</sub>) + abs(a<sub>n-1</sub>) - 5n<sup>3</sup></small></td>
                        </tr>
							
                        <tr>
                           <th>ZW</th>
						   <td><small>YW(x) = x + (x mod 6)<sup>3</sup></small></td>
						   <td><small>YW(x) = x + (a<sub>n-1</sub> mod 7)<sup>3</sup></small></td>
						   <td><small>YW(x) = <br>x + (b<sub>n-1</sub> mod 6)<sup>3</sup> + (a<sub>n-1</sub> mod 6)<sup>3</sup></small></th>
                        </tr>
						
						<tr>
						   <th>XV</th>
						   <td><small>YV(x) = 2(D - x)</small></td>
						   <td><small>YV(x) = 2x - 3(D - a<sub>n-1</sub>)</small></td>
						   <td><small>YV(x) = 2x - 4(D - b<sub>n-1</sub>)</small></td>
						</tr>
						
					    <tr>
						   <th>YV</th>
						   <td><small>ZW(x) = x + (D mod 6)<sup>3</sup> - 35n</small></td>
						   <td><small>ZW(x) = x + (a<sub>n-1</sub> mod 7)<sup>3</sup> - 12n<sup>2</sup></small></td>
						   <td><small>ZW(x) = x + (b<sub>n-1</sub> mod 8)<sup>3</sup> - 5n<sup>3</sup></small></td>
						</tr>
						
						<tr>
						   <th>ZV</th>
						   <td><small>ZV(x) = (x - x mod 2)/2 + D</small></td>
						   <td><small>ZV(x) = x + (x - x mod 2)/2 - a<sub>n-1</sub></small></td>
						   <td><small>ZV(x) = (x - x mod n)/n + 2b<sub>n-1</sub></small></td>
						</tr>
						
						<tr>
						   <th>WV</th>
						   <td><small>WV(x) = 5x - 3D</small></td>
						   <td><small>WV(x) = 8x - 5D + 3a<sub>n-1</sub></small></td>
						   <td><small>WV(x) = 13x - 8D + 5a<sub>n-1</sub> - 3b<sub>n-1</sub></small></td>
						</tr>
						
						 <tr>
                           <th>YX</th>
							<td><small>YX(x) = x - D</small></td>
							<td><small>YX(x) = x - a<sub>n-1</sub></small></td>
							<td><small>YX(x) = x - b<sub>n-1</sub> + a<sub>n-1</sub></small></td>
                        </tr>
                           
                        <tr>
                           <th>ZX</th>
							<td><small>ZX(x) = 2x + D</small></td>
							<td><small>ZX(x) = 2x + a<sub>n-1</sub></small></td>
							<td><small>ZX(x) = b<sub>n-1</sub> + a<sub>n-1</sub> - 2x</small></td>
                        </tr>
							
                        <tr>
                           <th>ZY</th>
							<td><small>WX(x) = x - 2D</small></td>
							<td><small>WX(x) = x - 2a<sub>n-1</sub></small></td>
							<td><small>WX(x) = x + 2a<sub>n-1</sub> - b<sub>n-1</sub></small></td>
                        </tr>
							
                        <tr>
						   <th>WX</th>
						   <td><small>VX(x) = 2D + x</small></td>
						   <td><small>VX(x) = 3D + x - a<sub>n-1</sub></small></td>
						   <td><small>VX(x) = 4D + x - b<sub>n-1</sub> - a<sub>n-1</sub></small></td>
                        </tr>
							
                        <tr>
                           <th>WY</th>
						   <td><small>ZY(x) = 2x - D - 35n</small></td>
						   <td><small>ZY(x) = 2x - abs(a<sub>n-1</sub>) - 12n<sup>2</sup></small></td>
						   <td><small>ZY(x) = 2x - abs(b<sub>n-1</sub>) - abs(a<sub>n-1</sub>) - 5n<sup>3</sup></small></td>
                        </tr>
							
                        <tr>
                           <th>WZ</th>
						   <td><small>WY(x) = x - (x mod 7)<sup>3</sup></small></td>
						   <td><small>WY(x) = x - (a<sub>n-1</sub> mod 6)<sup>3</sup></small></td>
						   <td><small>WY(x) = x - (b<sub>n-1</sub> mod 7)<sup>3</sup> - (a<sub>n-1</sub> mod 7)<sup>3</sup></small></th>
                        </tr>
						
						<tr>
						   <th>VX</th>
						   <td><small>VY(x) = 2(D + x)</small></td>
						   <td><small>VY(x) = 2x - 3(D + a<sub>n-1</sub>)</small></td>
						   <td><small>VY(x) = 2x - 4(D + b<sub>n-1</sub>)</small></td>
						</tr>
						
					    <tr>
						   <th>VY</th>
						   <td><small>WZ(x) = x - (D mod 6)<sup>3</sup> - 35n</small></td>
						   <td><small>WZ(x) = x - (a<sub>n-1</sub> mod 7)<sup>3</sup> - 12n<sup>2</sup></small></td>
						   <td><small>WZ(x) = x - (b<sub>n-1</sub> mod 8)<sup>3</sup> - 5n<sup>3</sup></small></td>
						</tr>
						
						<tr>
						   <th>VZ</th>
						   <td><small>VZ(x) = (x - x mod 2)/2 - D</small></td>
						   <td><small>VZ(x) = x + (x - x mod 2)/2 + a<sub>n-1</sub></small></td>
						   <td><small>VZ(x) = (x - x mod n)/n - 2b<sub>n-1</sub></small></td>
						</tr>
						
						<tr>
						   <th>VW</th>
						   <td><small>VW(x) = 5x + 3D</small></td>
						   <td><small>VW(x) = 8x + 5D - 3a<sub>n-1</sub></small></td>
						   <td><small>VW(x) = 13x + 8D - 5a<sub>n-1</sub> + 3b<sub>n-1</sub></small></td>
						</tr>						
                    </table>					
					</font>
                    <p>Note: a<sub>4</sub> is equal to zero.</p>
					</ul>
					     	<h4>Single Rotations</h4> 
                    <p>For single rotations, simply apply the function corresponding to the rotation:<br>
                        a<sub>n</sub> = F(a<sub>n-1</sub>), b<sub>n</sub> = F(b<sub>n-1</sub>), c<sub>n</sub> = F(c<sub>n-1</sub>)	
				    </div>
                <div class="page-footer relative-footer">Page 2 of 5</div>
            </div>
			<div class="page page-bg-03">
                <div class="page-header">
                    <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                    <span class="page-header-section-title">UltraStores</span>
                </div>
                <div class="page-content">
              				
                    <h4>Dual Rotations</h4>
                    <p>
                       These operators apply to the two functions corresponding to the individual rotations that occur simultaneously, referred to as R and S:
					   <ul><li>If the same axis is rotated by both individual rotations, apply the dual operator corresponding to that axis.</li>
					       <li>Otherwise, there is one axis that is not rotated by either of the two rotations.<br>Use the dual operator corresponding to that axis.</li></ul>
                    </p>
                    <table>
                        <tr>
                            <th></th>
                            <th>Stage 1</th>
                            <th>Stage 2</th>
                            <th>Stage 3</th>
                        </tr>
                        <tr>
                            <th>X</th>
                            <td><small>a<sub>n</sub> = <br>2D - abs(R(a<sub>n-1</sub>) - S(a<sub>n-1</sub>))</small></td>
                            <td><small>b<sub>n</sub> = <br>3D - abs(R(b<sub>n-1</sub>) + S(b<sub>n-1</sub>))</small></td>
                            <td><small>c<sub>n</sub> = <br>4D - abs(R(c<sub>n-1</sub>)) - abs(S(c<sub>n-1</sub>))</small></td>
                        </tr>

                         <tr>
                            <th>Y</th>
                            <td><small>a<sub>n</sub> = <br>D - R(a<sub>n-1</sub>) - S(a<sub>n-1</sub>)</small></td>
                            <td><small>b<sub>n</sub> = <br>a<sub>n-1</sub> - R(b<sub>n-1</sub>) - S(b<sub>n-1</sub>)</small></td>
                            <td><small>c<sub>n</sub> = <br>b<sub>n-1</sub> - R(c<sub>n-1</sub>) - S(c<sub>n-1</sub>)</small></td>
                        </tr>

                        <tr>
                            <th>Z</th>
                            <td><small>a<sub>n</sub> = <br>R(a<sub>n-1</sub>) + S(a<sub>n-1</sub>) - a<sub>n-1</sub></small></td>
                            <td><small>b<sub>n</sub> = <br>R(b<sub>n-1</sub>) + S(b<sub>n-1</sub>) - b<sub>n-1</sub> - a<sub>n-1</sub></small></td>
                            <td><small>c<sub>n</sub> = <br>R(c<sub>n-1</sub>) + S(c<sub>n-1</sub>) - c<sub>n-1</sub> - b<sub>n-1</sub> - a<sub>n-1</sub></small></td>
                        </tr>
						
						<tr>
                            <th>W</th>
                            <td><small>a<sub>n</sub> = <br>R(a<sub>n-1</sub>) + S(a<sub>n-1</sub>)</small></td>
                            <td><small>b<sub>n</sub> = <br>R(a<sub>n-1</sub> + b<sub>n-1</sub>) + S(a<sub>n-1</sub> + b<sub>n-1</sub>)</small></td>
                            <td><small>c<sub>n</sub> = <br>R(a<sub>n-1</sub> + b<sub>n-1</sub> + c<sub>n-1</sub>)<br> + S(a<sub>n-1</sub> + b<sub>n-1</sub> + c<sub>n-1</sub>)</sub></small></td>
                        </tr>
						
						<tr>
                            <th>V</th>
                            <td><small>a<sub>n</sub> = <br>a<sub>n-1</sub> + max(R(D), S(D)) - D</small></td>
                            <td><small>b<sub>n</sub> = <br>a<sub>n-1</sub> + max(R(b<sub>n-1</sub>), S(b<sub>n-1</sub>)) - D</small></td>
                            <td><small>c<sub>n</sub> = <br>max(R(S(c<sub>n-1</sub>)), S(R(c<sub>n-1</sub>)))</small></td>
                        </tr>

                    </table>   
				    <h3>Section 3: Converting Results</h3>
                    <p>Once a result of the sequence of operations has been obtained, it must be converted into <strong>balanced ternary</strong>, a base-3 number system in which the digits have the values 1, 0, and -1. Find a sequence of these values such that multiplying them with each power of 3 from 3<sup>0</sup> = 1 (the “least significant”) to 3<sup>5</sup> = 243 (the “most significant”), and adding that up, results in the desired number.</p>
                    <h3>Section 4: Entry and Submission</h3>
                    <p>To work out which buttons need to be pressed, first apply the list of conditions on the positions of buttons on the module to each row of the initial correspondences table, starting from the top of the list and working down.</p>
                </div>
                <div class="page-footer relative-footer">Page 3 of 5</div>
            </div>
            <div class="page page-bg-03">
                <div class="page-header">
                    <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                    <span class="page-header-section-title">UltraStores</span>
                </div>
                <div class="page-content">                   
                    <table>
                        <tr><th>Initial Correspondences</th><th>3<sup>0</sup></th><th>3<sup>1</sup></th><th>3<sup>2</sup></th><th>3<sup>3</sup></th><th>3<sup>4</sup></th><th>3<sup>5</sup></th></tr>
                        <tr><th>Stage 1</th><td>R</td><td>G</td><td>B</td><td>C</td><td>M</td><td>Y</td></tr>
                        <tr><th>Stage 2</th><td>Y</td><td>B</td><td>M</td><td>G</td><td>R</td><td>C</td></tr>
                        <tr><th>Stage 3</th><td>M</td><td>R</td><td>Y</td><td>B</td><td>G</td><td>C</td></tr>
                    </table>
                    <p></p>
					<font size = "2">
                    <table>
                        <tr><td>If...</td><td>..., then...</td></tr>
						<tr><td>the top button is white</td><td>reverse the sequence</td></tr>
                        <tr><td>the top right button is yellow</td><td>cycle each colour one space to the right.</td></tr>
                        <tr><td>the white button is diametrically opposite the black button</td><td>swap each colour with its diametric opposite on the module.</td></tr>
						<tr><td>the red button is diametrically opposite the cyan button</td><td>swap each colour with its complementary (R ↔ C, G ↔ M, B ↔ Y).</td></tr>                    
 					    <tr><td>the green button is vertically opposite the magenta button</td><td>cycle each colour in clockwise order of the colours on the module.</td>
						<tr><td>the green button is adjacent to the white button</td><td>cycle the primary colours<br>(R → G, G → B, B → R).</td></tr>
                        <tr><td>the magenta button is adjacent to the black button</td><td>cycle the secondary colours<br>(C → M, M → Y, Y → C).</td></tr>
						<tr><td>the white button is adjacent to the black button</td><td>cycle both the primary and secondary colours.</td></tr>
                        <tr><td>the blue and yellow buttons are on the same side of the module</td><td>swap B with the colour opposite in the sequence.</td></tr>
                        <tr><td>the red button is on the right side of the module</td><td>swap R and Y.</td></tr>
                        <tr><td>the blue button is on the left side of the module</td><td>swap G and C.</td></tr>
						<tr><td>, starting from the white button, the yellow button is further clockwise than the green button</td><td>swap the first and last colours in the sequence.</td>
						<tr><td>, starting from the black button, the blue button is further clockwise than the cyan button</td><td>swap the colours of the top and bottom buttons on the module<br>(only if neither are white or black).</td></tr>
                    </table>
					</font>
                </div>
                <div class="page-footer relative-footer">Page 4 of 5</div>
            </div>
            <div class="page page-bg-04">
                <div class="page-header">
                    <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                    <span class="page-header-section-title">UltraStores</span>
                </div>
                <div class="page-content">
                    <p>Once a balanced ternary number and the buttons corresponding to powers of 3 for the current stage have both been determined, follow the instructions below:</p>
                    <ol>
                        <li>Select the center button. This will cause the sequence to stop and change each of the black buttons to one of eight colours.</li>
                        <li>
                            Using the coloured buttons, enter the non-zero balanced ternary digits in order of <strong>least to most significant</strong>:
                            <ul>
                                <li>Pressing the white and black buttons will toggle which of the two are lit.</li>
                                <li>Pressing a coloured button while the white button is lit will enter a ‘+1’ in the corresponding digit.</li>
                                <li>Pressing a coloured button while the black button is lit will enter a ‘-1’ in the corresponding digit.</li>
                            </ul>
                        <li>Select the venter button again to submit the sequence of inputs.</li>
                    </ol>
                    <p>Submitting the correct sequence of inputs will advance the module to the next stage.</p>
                    <p>Submitting an incorrect balanced ternary number, or submitting the coloured buttons in the wrong order will result in a strike.</p>
                </div>
                <div class="page-footer relative-footer">Page 5 of 5</div>
            </div>
        </div>
    </div>
</body>
</html>
